"""
Smoke Tests - Critical Imports

Project: {{ project_name }}
Domain: {{ domain }}
Auto-generated by validation framework.

Tests that critical modules import without error.
Failures here indicate broken dependencies or syntax errors.
"""
from __future__ import annotations

import importlib
import sys

import pytest


@pytest.mark.smoke
class TestCriticalImports:
    """Verify all critical modules import without error."""

    def test_python_version(self) -> None:
        """Python version meets minimum requirement."""
        assert sys.version_info >= (3, 12), (
            f"Python 3.12+ required, got {sys.version_info.major}.{sys.version_info.minor}"
        )
{% for import_path in smoke_tests.critical_imports %}

    def test_import_{{ import_path | replace('.', '_') | replace('-', '_') }}(self) -> None:
        """Import {{ import_path }} succeeds."""
        try:
            importlib.import_module("{{ import_path }}")
        except ImportError as e:
            pytest.fail(f"Failed to import {{ import_path }}: {e}")
{% endfor %}
{% if not smoke_tests.critical_imports %}

    def test_placeholder(self) -> None:
        """Placeholder - add critical_imports to config.json."""
        # No critical imports configured
        # Edit .claude/validation/config.json to add imports to test
        pass
{% endif %}


@pytest.mark.smoke
class TestImportSideEffects:
    """Verify imports don't have unwanted side effects."""

    def test_no_immediate_execution(self, critical_imports: list[str]) -> None:
        """Imports don't execute code that could fail in CI."""
        for module_path in critical_imports:
            try:
                # Import should complete without triggering network calls,
                # database connections, or other side effects
                importlib.import_module(module_path)
            except Exception as e:
                # Log but don't fail - some modules may need config
                pytest.skip(f"Module {module_path} requires runtime config: {e}")
