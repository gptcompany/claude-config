---
phase: 13-ecc-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - ~/.claude/templates/validation/validators/ecc/__init__.py
  - ~/.claude/templates/validation/docs/ECC_INTEGRATION.md
autonomous: true
---

<objective>
Create ECC integration foundation: directory structure, base classes, and architecture documentation.

Purpose: Establish the foundation for porting ECC agents as validators. Define the adapter pattern and tier mapping that Plans 02 and 03 will implement.
Output: validators/ecc/ module with base class, integration architecture documentation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-ecc-integration/13-RESEARCH.md
@.planning/phases/13-ecc-integration/13-CONTEXT.md
@~/.claude/templates/validation/orchestrator.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ECC validators module structure</name>
  <files>~/.claude/templates/validation/validators/ecc/__init__.py, ~/.claude/templates/validation/validators/ecc/base.py</files>
  <action>
Create the `validators/ecc/` directory with:

1. `__init__.py` - Export all ECC validators and base class
2. `base.py` - ECCValidatorBase class extending BaseValidator with:
   - `agent: str` attribute for linking to ECC agent source
   - `_run_tool(cmd: list[str]) -> subprocess.CompletedProcess` helper for CLI tools
   - `_parse_json_output(stdout: str) -> dict` helper for JSON parsing
   - Standard timeout handling (300s default)

Base class pattern from research:
```python
class ECCValidatorBase(BaseValidator):
    """Base class for validators ported from ECC agents."""
    agent: str  # ECC agent name (e.g., "e2e-runner")
    timeout: int = 300  # 5 min default

    async def _run_tool(self, cmd: list[str]) -> subprocess.CompletedProcess:
        """Run CLI tool with timeout and capture output."""
        ...
```

DO NOT implement any specific validators yet - just the base class and structure.
  </action>
  <verify>python -c "from validators.ecc import ECCValidatorBase; print(ECCValidatorBase.__name__)"</verify>
  <done>ECCValidatorBase class importable, validators/ecc/ module created</done>
</task>

<task type="auto">
  <name>Task 2: Create ECC integration architecture documentation</name>
  <files>~/.claude/templates/validation/docs/ECC_INTEGRATION.md</files>
  <action>
Create architecture documentation at `docs/ECC_INTEGRATION.md` covering:

1. **Overview**: Why we're integrating ECC agents (specialized domain knowledge)

2. **Tier Mapping Table**: How ECC's 6-phase loop maps to our 3-tier system:
   | ECC Phase | Our Tier | Our Dimension |
   |-----------|----------|---------------|
   | Build Check | Tier 1 | code_quality (build portion) |
   | Type Check | Tier 1 | type_safety |
   | Lint Check | Tier 1 | code_quality (lint portion) |
   | Test Suite | Tier 1 | coverage + e2e_validation |
   | Security | Tier 1 | security |
   | Diff Review | Tier 2 | design_principles + architecture |

3. **New Dimensions**: List the 3 new dimensions being added:
   - e2e_validation (Tier 1/2): Playwright E2E test execution
   - tdd_compliance (Tier 2): TDD workflow enforcement
   - eval_metrics (Tier 3): pass@k reliability metrics

4. **Adapter Pattern**: Explain that ECC agents (markdown prompts) → Python validators that invoke the same CLI tools

5. **Source Reference**: Point to `/media/sam/1TB/everything-claude-code/` for original agents

Keep it concise (under 150 lines). This is reference documentation, not a tutorial.
  </action>
  <verify>test -f ~/.claude/templates/validation/docs/ECC_INTEGRATION.md && wc -l ~/.claude/templates/validation/docs/ECC_INTEGRATION.md</verify>
  <done>ECC_INTEGRATION.md exists with tier mapping table and architecture overview</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `validators/ecc/__init__.py` exists and exports ECCValidatorBase
- [ ] `validators/ecc/base.py` has _run_tool and _parse_json_output helpers
- [ ] `docs/ECC_INTEGRATION.md` has tier mapping table
- [ ] No import errors when running validation orchestrator
</verification>

<success_criteria>

- ECCValidatorBase importable from validators.ecc
- Documentation captures the ECC → our-system mapping
- Foundation ready for Plan 13-02 (validator implementations)
</success_criteria>

<output>
After completion, create `.planning/phases/13-ecc-integration/13-01-SUMMARY.md`
</output>
