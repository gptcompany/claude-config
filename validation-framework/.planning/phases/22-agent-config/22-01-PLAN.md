---
phase: 22-agent-config
plan: 01
type: execute
wave: 1
depends_on: ["21-01"]
files_modified:
  - "muletto:/home/node/clawd-nautilus/{SOUL,AGENTS,USER,IDENTITY}.md"
  - "muletto:/home/node/clawd-utxoracle/{SOUL,AGENTS,USER,IDENTITY}.md"
  - "muletto:/home/node/clawd-n8n/{SOUL,AGENTS,USER,IDENTITY}.md"
  - "muletto:/home/sam/moltbot-infra/clawdbot-config/openclaw.json"
autonomous: false
---

<objective>
Create per-agent workspace bootstrap files and update openclaw.json with identity, thinking levels, and cron optimizations for all 4 agents.

Purpose: 3 of 4 agents (nautilus, utxoracle, n8n) have EMPTY workspaces ‚Äî no SOUL.md, no instructions, no repo context. They behave generically. This plan gives each agent domain-specific personality, quality standards (TDD, anti-superficialit√†), and proper identity config.

Output: 4 agents fully configured with workspace bootstrap files + updated openclaw.json.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-models-providers/21-01-SUMMARY.md
@.planning/phases/22-agent-config/22-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create workspace bootstrap files for 3 agents</name>
  <files>
    muletto container: /home/node/clawd-{nautilus,utxoracle,n8n}/SOUL.md
    muletto container: /home/node/clawd-{nautilus,utxoracle,n8n}/AGENTS.md
    muletto container: /home/node/clawd-{nautilus,utxoracle,n8n}/USER.md
    muletto container: /home/node/clawd-{nautilus,utxoracle,n8n}/IDENTITY.md
  </files>
  <action>
    SSH to muletto (192.168.1.100), docker exec into openclaw-gateway container.

    For each agent (nautilus, utxoracle, n8n):
    1. Create workspace directory: `mkdir -p /home/node/clawd-{agent}/memory`
    2. Create SOUL.md ‚Äî based on main's SOUL.md pattern but customized:
       - nautilus: "You're Nautilus, Sam's algorithmic trading engineer. Speciality: NautilusTrader, Python, backtesting, strategy development."
       - utxoracle: "You're Oracle, Sam's crypto data analyst. Speciality: Bitcoin on-chain analysis, statistical clustering, DuckDB, FastAPI, market liquidity."
       - n8n: "You're Flow, Sam's workflow automation specialist. Speciality: N8N, Docker, Python, ML pipelines."
       - ALL agents share same quality standards section (TDD, anti-superficialit√†, prove concrete, security)
       - Keep each SOUL.md under 2KB (well within 20K bootstrapMaxChars limit)

    3. Create AGENTS.md ‚Äî per-agent repo context:
       - nautilus: repos=nautilus_dev. Key: NautilusTrader framework, Cython adapters, backtesting engine.
       - utxoracle: repos=UTXOracle, LiquidationHeatmap, openBB_liquidity. Key: pure Python, statistical methods, DuckDB analytics.
       - n8n: repos=N8N_dev. Key: N8N workflows, Docker containers, ML price prediction.
       - Include memory instructions (daily notes, no mental notes) from main's AGENTS.md.
       - Keep each AGENTS.md under 4KB.

    4. Create USER.md ‚Äî SAME content for all agents (copy from main's USER.md):
       - Sam's preferences, communication style, security rules.

    5. Create IDENTITY.md ‚Äî per-agent:
       - nautilus: name=Nautilus, emoji=üêô, theme="Algorithmic trading engineer"
       - utxoracle: name=Oracle, emoji=üîÆ, theme="Crypto data analyst"
       - n8n: name=Flow, emoji=‚ö°, theme="Workflow automation specialist"

    Important:
    - Use `docker exec openclaw-gateway sh -c 'cat > /path/file << "HEREDOC" ... HEREDOC'` pattern to write files
    - Do NOT duplicate main's AGENTS.md verbatim ‚Äî each agent needs its own repo-specific content
    - Do NOT include HEARTBEAT.md or TOOLS.md yet (Phase 23 will handle hooks, Phase 24 skills/tools)
  </action>
  <verify>
    For each agent workspace, verify:
    - `docker exec openclaw-gateway ls /home/node/clawd-{agent}/` shows SOUL.md, AGENTS.md, USER.md, IDENTITY.md, memory/
    - `docker exec openclaw-gateway wc -c /home/node/clawd-{agent}/SOUL.md` < 3000 chars
    - `docker exec openclaw-gateway wc -c /home/node/clawd-{agent}/AGENTS.md` < 5000 chars
  </verify>
  <done>All 3 agent workspaces have SOUL.md, AGENTS.md, USER.md, IDENTITY.md. Files under size limits.</done>
</task>

<task type="auto">
  <name>Task 2: Update openclaw.json with identity, thinking, and cron flags</name>
  <files>muletto:/home/sam/moltbot-infra/clawdbot-config/openclaw.json</files>
  <action>
    SSH to muletto, edit openclaw.json:

    1. Add `identity` blocks to each agent in `agents.list[]`:
       ```json
       {"id":"nautilus","workspace":"/home/node/clawd-nautilus","identity":{"name":"Nautilus","emoji":"üêô","theme":"Algorithmic trading engineer"}},
       {"id":"utxoracle","workspace":"/home/node/clawd-utxoracle","identity":{"name":"Oracle","emoji":"üîÆ","theme":"Crypto data analyst"}},
       {"id":"n8n","workspace":"/home/node/clawd-n8n","identity":{"name":"Flow","emoji":"‚ö°","theme":"Workflow automation specialist"}}
       ```
       Also add identity for main if missing: `{"name":"Bambam","emoji":"ü¶û","theme":"Senior dev, direct, competent"}`

    2. Add `thinkingDefault: "low"` to `agents.defaults` ‚Äî low is good default, save tokens on cron/heartbeats. Users can `/think:medium` or `/think:high` for implementation sessions.

    3. Check existing cron entries ‚Äî if any lack `--thinking off`, note them for manual update (cron config format may vary).

    Important:
    - BACKUP first: `cp openclaw.json openclaw.json.bak-$(date +%Y%m%d-%H%M%S)`
    - Use python3 or jq to modify JSON safely (not sed)
    - Validate JSON after edit: `python3 -m json.tool openclaw.json`
  </action>
  <verify>
    - `python3 -m json.tool openclaw.json` exits 0 (valid JSON)
    - `python3 -c "import json; d=json.load(open('openclaw.json')); [print(a['id'],a.get('identity',{}).get('name','MISSING')) for a in d['agents']['list']]"` shows all 4 agents with names
    - `python3 -c "import json; d=json.load(open('openclaw.json')); print(d['agents']['defaults'].get('thinkingDefault','MISSING'))"` shows "low"
  </verify>
  <done>openclaw.json has identity for all 4 agents, thinkingDefault=low, valid JSON.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    4 agent workspaces with bootstrap files + updated openclaw.json with identity and thinking config.

    Files created:
    - /home/node/clawd-nautilus/{SOUL,AGENTS,USER,IDENTITY}.md
    - /home/node/clawd-utxoracle/{SOUL,AGENTS,USER,IDENTITY}.md
    - /home/node/clawd-n8n/{SOUL,AGENTS,USER,IDENTITY}.md
    - openclaw.json updated with identity blocks + thinkingDefault
  </what-built>
  <how-to-verify>
    1. SSH to muletto: `ssh 192.168.1.100`
    2. Restart gateway: `cd /home/sam/moltbot-infra && docker compose up -d openclaw-gateway`
    3. Run doctor: `docker exec openclaw-gateway node /app/dist/entry.js doctor`
    4. Check agents listed with identities
    5. Test agent with workspace: `docker exec openclaw-gateway node /app/dist/entry.js agent --agent nautilus --message "who are you? what repos do you work on?" --json --timeout 30`
    6. Verify response references Nautilus identity and nautilus_dev repo
    7. Test another: `docker exec openclaw-gateway node /app/dist/entry.js agent --agent n8n --message "who are you?" --json --timeout 30`
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 3 new workspaces have SOUL.md, AGENTS.md, USER.md, IDENTITY.md
- [ ] File sizes within limits (SOUL < 3K, AGENTS < 5K, total < 15K per agent)
- [ ] openclaw.json valid JSON with identity blocks and thinkingDefault
- [ ] Gateway restart successful
- [ ] At least one agent responds with correct identity
</verification>

<success_criteria>

- All 4 agents have workspace bootstrap files
- Identity config in openclaw.json for all agents
- thinkingDefault set to "low"
- Gateway restarts without errors
- Agent responds with domain-specific identity when asked
</success_criteria>

<output>
After completion, create `.planning/phases/22-agent-config/22-01-SUMMARY.md`
</output>
