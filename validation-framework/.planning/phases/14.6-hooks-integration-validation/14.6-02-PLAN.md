---
phase: 14.6-hooks-integration-validation
plan: 02
type: execute
wave: 1
depends_on: ["14.5-08"]
files_modified:
  - ~/.claude/scripts/tests/regression/phase13-compat.test.js
  - ~/.claude/scripts/tests/regression/phase14-compat.test.js
  - ~/.claude/scripts/tests/regression/hooks-upgrade.test.js
autonomous: true
---

<objective>
Regression testing to ensure backward compatibility.

Purpose: Verify previous phases still work after hooks port
Output: Regression test suite with 40+ tests
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/14.6-hooks-integration-validation/14.6-RESEARCH.md

# Backward compatibility requirements:
# - Phase 13 components work unchanged
# - Phase 14 ECC hooks work with new hooks
# - Upgrade path is smooth
</context>

<tasks>

<task type="auto">
  <name>Task 1: Phase 13 compatibility tests</name>
  <files>~/.claude/scripts/tests/regression/phase13-compat.test.js</files>
  <action>
1. Create directory: `mkdir -p ~/.claude/scripts/tests/regression`
2. Test Phase 13 components still work:

   a. ValidationOrchestrator (5 tests):
      - Tier 1 validators work
      - Tier 2 validators work
      - Tier 3 validators work
      - Score calculation correct
      - Report generation works

   b. Agents (4 tests):
      - e2e-runner agent works
      - security-reviewer agent works
      - Agents integrate with hooks

   c. /validate skill (3 tests):
      - Skill invocation works
      - Results formatted correctly
      - Integration with hooks works

   d. Confidence loop (3 tests):
      - Visual validator works
      - Behavioral validator works
      - Progressive refinement works
  </action>
  <verify>node --test ~/.claude/scripts/tests/regression/phase13-compat.test.js</verify>
  <done>15 Phase 13 compatibility tests pass</done>
</task>

<task type="auto">
  <name>Task 2: Phase 14 ECC hooks compatibility</name>
  <files>~/.claude/scripts/tests/regression/phase14-compat.test.js</files>
  <action>
1. Test Phase 14 ECC hooks still work:

   a. Utils library (5 tests):
      - All functions exported
      - Platform detection works
      - File operations work
      - Hook I/O works

   b. Package manager (4 tests):
      - Detection works
      - Commands correct
      - Preference saved

   c. Session hooks (5 tests):
      - session-start works
      - session-end works
      - pre-compact works
      - suggest-compact works
      - evaluate-session works

   d. hooks.json (4 tests):
      - Old format still valid
      - New fields optional
      - Upgrade automatic
  </action>
  <verify>node --test ~/.claude/scripts/tests/regression/phase14-compat.test.js</verify>
  <done>18 Phase 14 compatibility tests pass</done>
</task>

<task type="auto">
  <name>Task 3: Hooks upgrade path tests</name>
  <files>~/.claude/scripts/tests/regression/hooks-upgrade.test.js</files>
  <action>
1. Test upgrade scenarios:

   a. Fresh install (3 tests):
      - All hooks created
      - hooks.json valid
      - All tests pass

   b. Upgrade from Phase 14 (4 tests):
      - Old hooks preserved
      - New hooks added
      - No conflicts
      - State migrated

   c. Mixed environment (3 tests):
      - Python hooks still work if present
      - Node.js hooks preferred
      - Graceful fallback

   d. Configuration migration (4 tests):
      - Old config format works
      - New fields added automatically
      - No breaking changes
      - Schema validated
  </action>
  <verify>node --test ~/.claude/scripts/tests/regression/hooks-upgrade.test.js</verify>
  <done>14 upgrade path tests pass</done>
</task>

<task type="auto">
  <name>Task 4: Forward compatibility tests (Phase 15)</name>
  <files>~/.claude/scripts/tests/regression/phase15-forward.test.js</files>
  <action>
1. Test hooks are ready for Phase 15 skills:

   a. tdd-workflow compatibility (3 tests):
      - tdd-guard hook works
      - quality-score accessible
      - State format correct

   b. verification-loop compatibility (3 tests):
      - session-analyzer output usable
      - meta-learning patterns accessible
      - Integration points exist

   c. coding-standards compatibility (3 tests):
      - auto-format hook works
      - auto-simplify hook works
      - Configuration accessible

   d. eval-harness compatibility (3 tests):
      - Metrics format correct
      - pass@k calculation supported
      - Data persistence works
  </action>
  <verify>node --test ~/.claude/scripts/tests/regression/phase15-forward.test.js</verify>
  <done>12 forward compatibility tests pass</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] phase13-compat.test.js: 15 tests pass
- [ ] phase14-compat.test.js: 18 tests pass
- [ ] hooks-upgrade.test.js: 14 tests pass
- [ ] phase15-forward.test.js: 12 tests pass
- [ ] Total: 59 regression tests pass
- [ ] No breaking changes identified
</verification>

<success_criteria>
- All Phase 13 components work unchanged
- All Phase 14 hooks work with new hooks
- Upgrade path is smooth
- Forward compatible with Phase 15
- 59 regression tests passing
</success_criteria>

<output>
After completion, create `.planning/phases/14.6-hooks-integration-validation/14.6-02-SUMMARY.md`
</output>
